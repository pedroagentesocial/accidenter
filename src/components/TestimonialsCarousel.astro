---
import { t } from "../i18n";
const { locale } = Astro.props as { locale: "en" | "es" };
const reviews = (locale === "en"
  ? [
      { text: "Prompt, professional care. Highly recommend!", author: "Emily Johnson", avatar: "https://i.pravatar.cc/96?img=12" },
      { text: "Staff was bilingual and very helpful.", author: "Carlos Rivera", avatar: "https://i.pravatar.cc/96?img=5" },
      { text: "On‑site diagnostics made things fast.", author: "Ava Thompson", avatar: "https://i.pravatar.cc/96?img=31" },
      { text: "Clear guidance after my accident. Thank you!", author: "Juan Garcia", avatar: "https://i.pravatar.cc/96?img=45" },
      { text: "Efficient visit and caring team.", author: "Sofia Martinez", avatar: "https://i.pravatar.cc/96?img=7" },
      { text: "Helpful follow‑up and recovery support.", author: "Daniel Brooks", avatar: "https://i.pravatar.cc/96?img=21" },
      { text: "Fast intake and thorough exam.", author: "Mia Lopez", avatar: "https://i.pravatar.cc/96?img=23" },
      { text: "Clear next steps and bilingual staff.", author: "Noah Williams", avatar: "https://i.pravatar.cc/96?img=8" },
      { text: "Compassionate care after my crash.", author: "Grace Hernandez", avatar: "https://i.pravatar.cc/96?img=16" },
      { text: "They explained everything clearly.", author: "Olivia Brown", avatar: "https://i.pravatar.cc/96?img=27" },
      { text: "Quick, friendly, and professional.", author: "Liam Davis", avatar: "https://i.pravatar.cc/96?img=9" },
      { text: "The team coordinated my follow‑up.", author: "Emma Wilson", avatar: "https://i.pravatar.cc/96?img=13" },
      { text: "I felt safe and cared for.", author: "James Miller", avatar: "https://i.pravatar.cc/96?img=33" }
    ]
  : [
      { text: "Atención rápida y profesional. Recomendado.", author: "Sofía Martínez", avatar: "https://i.pravatar.cc/96?img=15" },
      { text: "Personal bilingüe y muy amable.", author: "Carlos Rivera", avatar: "https://i.pravatar.cc/96?img=18" },
      { text: "Diagnóstico en sitio agilizó todo.", author: "Isabela Ramírez", avatar: "https://i.pravatar.cc/96?img=22" },
      { text: "Guía clara después del accidente. Gracias.", author: "Juan García", avatar: "https://i.pravatar.cc/96?img=36" },
      { text: "Visita eficiente y equipo atento.", author: "Ana Torres", avatar: "https://i.pravatar.cc/96?img=29" },
      { text: "Buen seguimiento y apoyo en recuperación.", author: "Miguel Hernández", avatar: "https://i.pravatar.cc/96?img=41" },
      { text: "Ingreso rápido y examen minucioso.", author: "Valeria López", avatar: "https://i.pravatar.cc/96?img=11" },
      { text: "Pasos claros y personal bilingüe.", author: "Andrés Pérez", avatar: "https://i.pravatar.cc/96?img=44" },
      { text: "Atención amable tras mi choque.", author: "Camila Fernández", avatar: "https://i.pravatar.cc/96?img=25" },
      { text: "Me explicaron todo con claridad.", author: "Lucía Gómez", avatar: "https://i.pravatar.cc/96?img=28" },
      { text: "Rápidos y profesionales.", author: "Diego Castillo", avatar: "https://i.pravatar.cc/96?img=14" },
      { text: "Coordinación excelente del seguimiento.", author: "Elena Rojas", avatar: "https://i.pravatar.cc/96?img=19" },
      { text: "Me sentí seguro y bien atendido.", author: "Javier Morales", avatar: "https://i.pravatar.cc/96?img=20" }
    ]);
---
<div class="w-screen -mx-[calc(50vw-50%)]">
  <div class="flex items-center justify-center gap-3 mb-4">
    <div class="inline-flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" class="h-6 w-6">
        <path fill="#EA4335" d="M24 9.5c3.15 0 5.97 1.12 8.2 2.97l6.16-6.16C34.98 2.67 29.86 1 24 1 14.66 1 6.57 6.33 2.85 14l7.69 5.97C12.34 15.8 17.75 9.5 24 9.5z"/>
        <path fill="#FBBC05" d="M46.15 24.5c0-1.61-.15-3.15-.42-4.63H24v9.16h12.49c-.54 2.93-2.19 5.41-4.68 7.08l7.23 5.63C43.17 38.84 46.15 32.25 46.15 24.5z"/>
        <path fill="#4285F4" d="M24 47c6.51 0 12-2.15 16.02-5.81l-7.23-5.63C30.45 37.09 27.44 38 24 38c-7.13 0-13.17-4.77-15.34-11.27L1 32.09C5.01 40.55 13.81 47 24 47z"/>
        <path fill="#34A853" d="M8.66 26.73C7.94 24.7 7.5 22.65 7.5 20.5c0-2.15.44-4.2 1.16-6.23L1 14c-1.31 2.63-2 5.55-2 8.5 0 3.41.79 6.62 2.17 9.59l7.49-5.36z"/>
      </svg>
      <span class="font-heading text-brand-dark">{t(locale, "ui.testimonials.fromGoogle")}</span>
    </div>
  </div>
  <div class="relative overflow-hidden">
    <div
      class="band-track flex gap-4 will-change-transform"
      data-base={locale === "es" ? "36s" : "40s"}
      data-fast={locale === "es" ? "18s" : "20s"}
      style={`animation-duration:${locale === "es" ? "36s" : "40s"};animation-direction:${locale === "es" ? "reverse" : "normal"}`}
    >
      <div class="flex gap-4">
        {reviews.map((r) => (
          <div class="min-w-[280px] sm:min-w-[320px] bg-white border border-brand-accent rounded-xl p-4 shadow-sm">
            <div class="flex items-center gap-3 mb-3">
              <img src={r.avatar} alt="Reviewer avatar" class="h-10 w-10 rounded-full object-cover" loading="lazy" />
              <div class="flex gap-0.5 text-brand-success">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg>
              </div>
            </div>
            <p class="text-sm sm:text-base text-brand-dark">{r.text}</p>
            <p class="mt-2 text-xs text-brand-dark/80">— {r.author}</p>
          </div>
        ))}
      </div>
      <div class="flex gap-4">
        {reviews.map((r) => (
          <div class="min-w-[280px] sm:min-w-[320px] bg-white border border-brand-accent rounded-xl p-4 shadow-sm">
            <div class="flex items-center gap-3 mb-3">
              <img src={r.avatar} alt="Reviewer avatar" class="h-10 w-10 rounded-full object-cover" loading="lazy" />
              <div class="flex gap-0.5 text-brand-success">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg>
              </div>
            </div>
            <p class="text-sm sm:text-base text-brand-dark">{r.text}</p>
            <p class="mt-2 text-xs text-brand-dark/80">— {r.author}</p>
          </div>
        ))}
      </div>
    </div>
  </div>
  <script>
    const track = document.querySelector(".band-track");
    if (track) {
      const base = track.getAttribute("data-base") || "40s";
      const fast = track.getAttribute("data-fast") || "20s";
      track.addEventListener("mouseenter", () => { (track as HTMLElement).style.animationDuration = fast; });
      track.addEventListener("mouseleave", () => { (track as HTMLElement).style.animationDuration = base; });
      track.addEventListener("touchstart", () => { (track as HTMLElement).style.animationDuration = fast; }, { passive: true });
      track.addEventListener("touchend", () => { (track as HTMLElement).style.animationDuration = base; });
    }
  </script>
  <style>
    .band-track { animation: bandScroll 48s linear infinite; }
    @keyframes bandScroll {
      from { transform: translateX(0); }
      to { transform: translateX(-50%); }
    }
  </style>
</div>
